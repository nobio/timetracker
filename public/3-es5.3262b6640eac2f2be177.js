function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{Y6Aa:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r,i=n("wd/R"),o=n.n(i),a=n("un/a"),s=n("JIr8"),c=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"localEntryDate",get:function(){return this.entryDate?o()(this.entryDate).format("YYYY-MM-DDTHH:mm:ss.SSSZ"):void 0},set:function(e){this.entryDate=o()(e).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}},{key:"encodeEntry",value:function(e){return this.id=e._id,this.direction=e.direction,this.lastChanged=e.last_changed,this.entryDate=e.entry_date,this.longitude=e.longitude,this.latitude=e.latitude,"enter"==this.direction?(this.ion_direction_icon="enter",this.ion_color="primary",this.direction_translated="kommen"):"go"==this.direction&&(this.ion_direction_icon="exit",this.ion_color="secondary",this.direction_translated="gehen"),this}},{key:"decodeEntry",value:function(){var e={};return e._id=this.id,e.last_changed=this.lastChanged,e.entry_date=this.entryDate,e.longitude=this.longitude,e.latitude=this.latitude,e.direction=this.direction,e}}]),e}(),l=function e(){_classCallCheck(this,e),this.workingTime="",this.pause="",this.totalWorkload=""},u=n("eHTu"),d=n("fXoL"),f=n("tk/3"),b=n("TEn/"),h=n("iXKo"),y=((r=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r,i)).httpClient=e,o.alertCtrl=r,o.logger=i,o.entriesByDate=[],o.selectedEntry=new c,o.entryStats=new l,o}return _createClass(n,[{key:"loadEntriesByDate",value:function(e){var t=this;this.logger.log("loading entries for "+e);var n=new Date(e).getTime();this.GET("/api/entries?dt="+n).pipe(Object(a.a)(2)).subscribe((function(e){t.entriesByDate=[],e.forEach((function(e){var n=new c;n.encodeEntry(e),t.entriesByDate.push(n)}))}))}},{key:"loadEntry",value:function(e){var t=this;this.logger.log("loading entry "+e),e&&this.GET("/api/entries/"+e).pipe(Object(a.a)(2),Object(s.a)(_get(_getPrototypeOf(n.prototype),"handleError",this))).subscribe((function(e){t.selectedEntry=new c,t.selectedEntry.encodeEntry(e)}),(function(e){throw _get(_getPrototypeOf(n.prototype),"handleError",t).call(t,e),new Error(e)}))}},{key:"createEntry",value:function(e,t){var r=this;this.POST("/api/entries/",{direction:e.direction,datetime:e.entryDate,longitude:e.longitude,latitude:e.latitude}).subscribe((function(e){r.loadEntriesByDate(t)}),(function(e){throw _get(_getPrototypeOf(n.prototype),"handleError",r).call(r,e),r.loadEntriesByDate(t),new Error(e)}))}},{key:"loadWorkingTime",value:function(e){var t=this;if(this.entryStats=new l,void 0===e)return this.entryStats.workingTime="na.",this.entryStats.pause="na.",void(this.entryStats.totalWorkload="na.");var r=new Date(e).getTime();this.GET("/api/entries?busy="+r).pipe(Object(a.a)(2),Object(s.a)(_get(_getPrototypeOf(n.prototype),"handleError",this))).subscribe((function(e){t.logger.log(e),t.entryStats.totalWorkload=t.millisecToReadbleTime(e.duration),t.entryStats.workingTime=t.millisecToReadbleTime(e.busytime),t.entryStats.pause=t.millisecToReadbleTime(e.pause)}))}},{key:"deleteSelectedEntry",value:function(){return this.DELETE("/api/entries/"+this.selectedEntry.id).pipe(Object(a.a)(2),Object(s.a)(_get(_getPrototypeOf(n.prototype),"handleError",this)))}},{key:"saveSelectedEntry",value:function(){return this.PUT("/api/entries/"+this.selectedEntry.id,this.selectedEntry.decodeEntry()).pipe(Object(a.a)(2),Object(s.a)(_get(_getPrototypeOf(n.prototype),"handleError",this)))}},{key:"loadDatesWithFailedEntries",value:function(){var e=this,t=new Array;return new Promise((function(r,i){e.GET("/api/entries/error/dates").pipe(Object(a.a)(2),Object(s.a)(_get(_getPrototypeOf(n.prototype),"handleError",e))).subscribe((function(e){e.forEach((function(e){t.push({type:e["error-type"],date:e["error-date"],urlDate:o()(e["error-date"]).format("YYYY-MM-DD")})})),r(t)}),(function(t){_get(_getPrototypeOf(n.prototype),"handleError",e).call(e,t),e.logger.error(t,"Tage mit Fehlerhafen Eintr\xe4gen"),e.logger.error(t._body,"Tage mit Fehlerhafen Eintr\xe4gen"),e.selectedEntry=new c,i("Fehler beim Laden der Daten mit fehlerhaften Eintr\xe4gen: "+t)}))}))}},{key:"millisecToReadbleTime",value:function(e){if(!e)return"";var t=new Date;return t.setTime(e),(t.getUTCHours()<10?"0"+t.getUTCHours():t.getUTCHours())+":"+(t.getUTCMinutes()<10?"0"+t.getUTCMinutes():t.getUTCMinutes())}}]),n}(u.a)).\u0275fac=function(e){return new(e||r)(d.Qb(f.b),d.Qb(b.b),d.Qb(h.a))},r.\u0275prov=d.Fb({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},sCsk:function(e,t,n){"use strict";n.r(t),n.d(t,"EntriesPageModule",(function(){return w}));var r=n("TEn/"),i=n("ofXK"),o=n("3Pt+"),a=n("tyNb"),s=n("mrSG"),c=n("wd/R"),l=n.n(c),u=n("sPAB"),d=n("fXoL"),f=n("Y6Aa"),b=n("HmWd"),h=function(e){return["./entries",e]};function y(e,t){if(1&e&&(d.Mb(0,"ion-item",21),d.Kb(1,"ion-icon",22),d.mc(2," \xa0 "),d.Mb(3,"ion-label",23),d.mc(4),d.Xb(5,"date"),d.Lb(),d.Mb(6,"ion-label",24),d.mc(7),d.Lb(),d.Lb()),2&e){var n=t.$implicit;d.bc("routerLink",d.ec(9,h,n.id)),d.zb(1),d.cc("name",n.ion_direction_icon),d.cc("color",n.ion_color),d.zb(3),d.oc(" ",d.Yb(5,6,n.entryDate,"HH:mm")," Uhr "),d.zb(2),d.cc("color",n.ion_color),d.zb(1),d.oc(" ",n.direction_translated," ")}}var p,g,m,v=function(){return["./fails"]},_=[{path:"",component:(p=function(){function e(t,n,r){_classCallCheck(this,e),this.timeEntryService=t,this.toastCtrl=n,this.route=r,this._date=(new Date).toISOString(),this.hasNoFailedDates=!1}return _createClass(e,[{key:"ionViewWillEnter",value:function(){var e=this;this.route.snapshot.params.date&&(this.date=l()(this.route.snapshot.params.date).toISOString()),this.date||(this.date=(new Date).toISOString()),this.timeEntryService.loadEntriesByDate(this.date),this.timeEntryService.loadWorkingTime(this.date),this.timeEntryService.loadDatesWithFailedEntries().then((function(t){return e.hasNoFailedDates=0===t.length}))}},{key:"enter",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.createEntry("enter");case 1:case"end":return e.stop()}}),e,this)})))}},{key:"leave",value:function(){this.createEntry("go")}},{key:"createEntry",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n={}).direction=e,n.entryDate=this.date,t.prev=2,t.next=5,u.a.lookUpGeoLocation();case 5:return r=t.sent,n.latitude=r.latitude,n.longitude=r.longitude,t.next=10,this.timeEntryService.createEntry(n,this.date);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),this.presentMessage(t.t0,2e4);case 15:case"end":return t.stop()}}),t,this,[[2,12]])})))}},{key:"date",get:function(){return this._date},set:function(e){this._date=e,this.timeEntryService.loadEntriesByDate(this.date),this.timeEntryService.loadWorkingTime(this.date)}},{key:"setYesterday",value:function(){var e=new Date(this.date);e.setDate(e.getDate()-1),this.date=e.toISOString()}},{key:"setToday",value:function(){this.date=(new Date).toISOString()}},{key:"setTomorrow",value:function(){var e=new Date(this.date);e.setDate(e.getDate()+1),this.date=e.toISOString()}},{key:"presentMessage",value:function(e,t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastCtrl.create({message:e,duration:t});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}}]),e}(),p.\u0275fac=function(e){return new(e||p)(d.Jb(f.a),d.Jb(r.T),d.Jb(a.a))},p.\u0275cmp=d.Db({type:p,selectors:[["app-entries"]],decls:40,vars:18,consts:[[3,"translucent"],["displaySize","small"],[3,"fullscreen"],["collapse","condense"],["size","large"],["padding",""],["size","12","size-sm","8","offset-sm","2"],["icon-left","","color","primary",1,"button","button-full",3,"click"],["name","log-in"],["icon-left","","color","secondary",1,"button","button-full",3,"click"],["name","log-out"],[3,"click"],["name","arrow-back"],["name","calendar"],["name","arrow-forward"],["color","warning","outline","",3,"disabled","routerLink"],["name","hammer"],["color","light"],["size","large","displayFormat","HH:mm","pickerFormat","DDD MMM YYYY H mm",3,"ngModel","ngModelChange"],["color","warning",1,"info-line"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],["size","large",3,"name","color"],["lot","end"],["slot","end",3,"color"]],template:function(e,t){1&e&&(d.Mb(0,"ion-header",0),d.Mb(1,"ion-toolbar"),d.Mb(2,"ion-title"),d.mc(3," Timetracker "),d.Lb(),d.Lb(),d.Kb(4,"online-status-component",1),d.Lb(),d.Mb(5,"ion-content",2),d.Mb(6,"ion-header",3),d.Mb(7,"ion-toolbar"),d.Mb(8,"ion-title",4),d.mc(9,"Eintr\xe4ge"),d.Lb(),d.Lb(),d.Lb(),d.Mb(10,"ion-grid",5),d.Mb(11,"ion-row"),d.Mb(12,"ion-col",6),d.Mb(13,"ion-button",7),d.Ub("click",(function(){return t.enter()})),d.Kb(14,"ion-icon",8),d.mc(15),d.Xb(16,"date"),d.Lb(),d.Mb(17,"ion-button",9),d.Ub("click",(function(){return t.leave()})),d.Kb(18,"ion-icon",10),d.mc(19),d.Xb(20,"date"),d.Lb(),d.Lb(),d.Lb(),d.Mb(21,"ion-row"),d.Mb(22,"ion-col",6),d.Mb(23,"ion-button",11),d.Ub("click",(function(){return t.setYesterday()})),d.Kb(24,"ion-icon",12),d.Lb(),d.Mb(25,"ion-button",11),d.Ub("click",(function(){return t.setToday()})),d.Kb(26,"ion-icon",13),d.Lb(),d.Mb(27,"ion-button",11),d.Ub("click",(function(){return t.setTomorrow()})),d.Kb(28,"ion-icon",14),d.Lb(),d.Mb(29,"ion-button",15),d.Kb(30,"ion-icon",16),d.Lb(),d.Mb(31,"ion-button",17),d.Mb(32,"ion-datetime",18),d.Ub("ngModelChange",(function(e){return t.date=e})),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Mb(33,"ion-row"),d.Mb(34,"ion-col",6),d.Mb(35,"ion-item"),d.Mb(36,"ion-label",19),d.mc(37),d.Lb(),d.Lb(),d.Mb(38,"ion-list"),d.kc(39,y,8,11,"ion-item",20),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb()),2&e&&(d.bc("translucent",!0),d.zb(5),d.bc("fullscreen",!0),d.zb(10),d.oc("\xa0Kommen (",d.Yb(16,11,t.date,"EEE, dd.MM.yyyy - HH:mm"),") "),d.zb(4),d.oc("\xa0Gehen (",d.Yb(20,14,t.date,"EEE, dd.MM.yyyy - HH:mm"),") "),d.zb(10),d.cc("disabled",t.hasNoFailedDates),d.bc("routerLink",d.dc(17,v)),d.zb(3),d.bc("ngModel",t.date),d.zb(5),d.qc(" Gesamt ",t.timeEntryService.entryStats.totalWorkload," | Arbeit ",t.timeEntryService.entryStats.workingTime," | Pause ",t.timeEntryService.entryStats.pause," "),d.zb(2),d.bc("ngForOf",t.timeEntryService.entriesByDate))},directives:[r.r,r.K,r.I,b.a,r.o,r.q,r.z,r.n,r.g,r.s,r.Q,a.h,r.p,r.R,o.e,o.h,r.u,r.v,r.w,i.j],pipes:[i.d],styles:[".info-line[_ngcontent-%COMP%]{font-size:13px}"]}),p)},{path:"entries/:id",loadChildren:function(){return n.e(23).then(n.bind(null,"C2n5")).then((function(e){return e.EntryPageModule}))}},{path:"entries/:id/map",loadChildren:function(){return Promise.all([n.e(2),n.e(25)]).then(n.bind(null,"gmQf")).then((function(e){return e.MapPageModule}))}},{path:"fails",loadChildren:function(){return n.e(24).then(n.bind(null,"9dms")).then((function(e){return e.FailsPageModule}))}}],E=((g=function e(){_classCallCheck(this,e)}).\u0275mod=d.Hb({type:g}),g.\u0275inj=d.Gb({factory:function(e){return new(e||g)},imports:[[a.i.forChild(_)],a.i]}),g),k=n("1tww"),w=((m=function e(){_classCallCheck(this,e)}).\u0275mod=d.Hb({type:m}),m.\u0275inj=d.Gb({factory:function(e){return new(e||m)},imports:[[r.L,i.b,o.b,k.a,E]]}),m)}}]);